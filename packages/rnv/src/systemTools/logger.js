import chalk from 'chalk';


const RNV_START = 'ðŸš€ ReNative';
const RNV = 'ReNative';
const LINE = chalk.white.bold('----------------------------------------------------------');
const LINE2 = chalk.gray('----------------------------------------------------------');

export const logWelcome = () => {
    console.log(`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚        ${chalk.red('â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—')} â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—${chalk.red('â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—')} â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—${chalk.red('â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—')}â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—       â”‚
â”‚        ${chalk.red('â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—')}â–ˆâ–ˆâ•”â•â•â•â•â•${chalk.red('â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘')}â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘${chalk.red('â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘')}â–ˆâ–ˆâ•”â•â•â•â•â•       â”‚
â”‚        ${chalk.red('â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•')}â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  ${chalk.red('â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘')}â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘${chalk.red('â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘')}â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—         â”‚
â”‚        ${chalk.red('â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—')}â–ˆâ–ˆâ•”â•â•â•  ${chalk.red('â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘')}â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘${chalk.red('â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•')}â–ˆâ–ˆâ•”â•â•â•         â”‚
â”‚        ${chalk.red('â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘')}â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—${chalk.red('â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘')}â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘${chalk.red(' â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• ')}â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—       â”‚
â”‚        ${chalk.red('â•šâ•â•  â•šâ•â•')}â•šâ•â•â•â•â•â•â•${chalk.red('â•šâ•â•  â•šâ•â•â•â•')}â•šâ•â•  â•šâ•â•   â•šâ•â•   â•šâ•â•${chalk.red('  â•šâ•â•â•â•  ')}â•šâ•â•â•â•â•â•â•       â”‚
â”‚                                                                              â”‚
â”‚        v0.23.22                                                              â”‚
â”‚        ðŸš€ðŸš€ðŸš€ https://renative.org ðŸš€ðŸš€ðŸš€                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    `);
};

let _messages;
let _currentJob;
let _currentProcess;
let _isInfoEnabled = false;

export const configureLogger = (process, job, subCommand, isInfoEnabled) => {
    _messages = [];
    _currentJob = job;
    _currentProcess = process;
    _currentSubCommand = subCommand;
    _isInfoEnabled = isInfoEnabled;
};

export const logAndSave = (msg, skipLog) => {
    if (!_messages.includes(msg)) _messages.push(msg);
    if (!skipLog) console.log(`${msg}`);
};

export const logSummary = () => {
    let logContent = _printIntoBox('All good as ðŸ¦„ ');
    if (_messages.length) {
        logContent = '';
        _messages.forEach((m) => {
            logContent += `â”‚ ${m}\n`;
        });
        logContent += 'â”‚';
    }


    let str = _printBoxStart('ðŸš€  SUMMARY');
    // str += _printIntoBox('SHlelelele euheu ehhh');
    str += _printIntoBox('');
    str += logContent;
    str += _printIntoBox('');
    str += _printBoxEnd();

    console.log(str);
};

export const setCurrentJob = (job) => {
    _currentJob = job;
};

export const logTask = (task) => {
    console.log(chalk.green(`${RNV} ${_currentJob} - ${task} - Starting!`));
};

export const logWarning = (msg) => {
    logAndSave(chalk.yellow(`âš ï¸  ${RNV} ${_currentJob} - WARNING: ${msg}`));
};

export const logInfo = (msg) => {
    console.log(chalk.magenta(`â„¹ï¸  ${RNV} ${_currentJob} - NOTE: ${msg}`));
};

export const logDebug = (...args) => {
    if (_isInfoEnabled) console.log.apply(null, args);
};

export const logComplete = (isEnd = false) => {
    console.log(chalk.white.bold(`\n ${RNV} ${_currentJob || ''} - Done! ðŸš€`));
    if (isEnd) logEnd(0);
};

export const logSuccess = (msg) => {
    console.log(`âœ… ${chalk.magenta(msg)}`);
};

export const logError = (e, isEnd = false) => {
    if (e && e.message) {
        logAndSave(chalk.red.bold(`ðŸ›‘  ${RNV} ${_currentJob} - ERRROR! ${e.message}\n${e.stack}`), isEnd);
    } else {
        logAndSave(chalk.red.bold(`ðŸ›‘  ${RNV} ${_currentJob} - ERRROR! ${e}`), isEnd);
    }
    if (isEnd) logEnd(1);
};

export const logEnd = (code) => {
    logSummary();
    _currentProcess.exit(code);
};

export const logInitialize = () => {
    console.log(
        chalk.white(`\n${LINE}\n ${RNV_START} ${chalk.white.bold(`${_currentJob} ${_currentSubCommand || ''}`)} is firing up! ðŸ”¥\n${LINE}\n`),
    );
};

export const logAppInfo = c => new Promise((resolve, reject) => {
    console.log(chalk.gray(`\n${LINE2}\nâ„¹ï¸  Current App Config: ${chalk.white.bold(c.files.appConfigFile.id)}\n${LINE2}`));

    resolve();
});

const _printIntoBox = (str2) => {
    let output = chalk.default('â”‚  ');
    const endLine = '                                                                               â”‚\n';
    output += chalk.default(str2);
    const l = output.length - endLine.length;
    output += chalk.default(endLine.slice(l));
    return output;
};

const _printBoxStart = (str) => {
    let output = chalk.default('â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n');
    output += _printIntoBox(str);
    output += 'â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n';
    return output;
};

const _printBoxEnd = () => chalk.default('â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜');
